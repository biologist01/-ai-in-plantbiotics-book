"use strict";(self.webpackChunkplant_biotech_ai=self.webpackChunkplant_biotech_ai||[]).push([[4978],{2597(s,e,a){a.r(e),a.d(e,{default:()=>o});var i=a(2444),n=a(3845),t=a(467),c=a(6540),r=a(4848),l=["Wow! Great question! \ud83c\udf89","You're so smart! \ud83c\udf1f","Super curious explorer! \ud83d\udd2d","Amazing thinking! \ud83d\udca1","You're a plant genius! \ud83c\udf31","Fantastic question! \u2728","Way to go! \ud83d\ude80","Brilliant! Keep asking! \ud83c\udfaf"],d=["Plant Buddy is thinking... \ud83c\udf31","Hmm, let me check my plant brain... \ud83e\udde0","Searching my garden of knowledge... \ud83c\udf3b","Growing an answer for you... \ud83c\udf3f","Digging up cool facts... \ud83d\udd0d"];function o(s){var e=s.isOpen,o=s.onClose,u=(0,c.useState)("idle"),m=u[0],k=u[1],h=(0,c.useState)(!1),x=h[0],v=h[1],p=(0,c.useState)([]),j=p[0],N=p[1],f=(0,c.useState)(""),b=f[0],g=f[1],y=(0,c.useState)(!1),w=y[0],C=y[1],S=(0,c.useState)(!1),A=S[0],T=S[1],M=(0,c.useState)(0),R=M[0],P=M[1],D=(0,c.useState)(0),L=D[0],B=D[1],W=(0,c.useState)(null),E=W[0],V=W[1],F=(0,c.useState)(0),O=F[0],H=F[1],q=(0,c.useState)(null),G=q[0],Y=q[1],_=(0,c.useState)(!1),z=_[0],I=_[1],U=(0,c.useState)(d[0]),K=U[0],J=U[1],Q=(0,c.useState)("sleeping"),X=Q[0],Z=Q[1],$=(0,c.useState)("idle"),ss=$[0],es=$[1],as=(0,c.useRef)(null),is=(0,c.useRef)(null),ns=(0,c.useRef)(null),ts=(0,c.useRef)(null),cs=(0,c.useRef)(null),rs=(0,c.useRef)(null),ls=(0,c.useRef)(null),ds=((0,c.useRef)(null),(0,c.useRef)(null),(0,c.useRef)(!1)),os=(0,c.useRef)(!1),us=(0,c.useCallback)(function(){H(function(s){return s+1}),I(!0),Y(l[Math.floor(Math.random()*l.length)]),setTimeout(function(){I(!1),Y(null)},2500)},[]);(0,c.useEffect)(function(){if("processing"===m||!1===w&&"connected"===m){var s=setInterval(function(){J(d[Math.floor(Math.random()*d.length)])},2e3);return function(){return clearInterval(s)}}},[m,w]),(0,c.useEffect)(function(){var s="connected"===m||"speaking"===m||"listening"===m||"processing"===m;if("idle"===m)es("idle");else if("connecting"===m)es("thinking");else if(s)if(w)es("speaking");else{if(!A){var e=setTimeout(function(){os.current||ds.current||es("thinking")},800);return function(){return clearTimeout(e)}}es("listening")}},[m,w,A]),(0,c.useEffect)(function(){Z("idle"===m?"sleeping":"connecting"===m?"excited":"speaking"===ss?"happy":"listening"===ss?"listening":"thinking")},[m,ss]);var ms=(0,c.useCallback)(function(s,e){try{ts.current||(ts.current=new AudioContext);var a=ts.current,i=a.createAnalyser();i.fftSize=256,i.smoothingTimeConstant=.3,a.createMediaStreamSource(s).connect(i),e?cs.current=i:rs.current=i;var n=new Uint8Array(i.frequencyBinCount),t=0,c=0,r=e?.05:.1,l=function(){i.getByteFrequencyData(n);var s=n.reduce(function(s,e){return s+e},0)/n.length,a=Math.min(s/128,1),d=a>r;e?(P(a),d?(t++,c=0,t>=3&&!ds.current&&(ds.current=!0,T(!0))):(c++,t=0,c>=15&&ds.current&&(ds.current=!1,T(!1)))):(B(a),d?(t++,c=0,t>=3&&!os.current&&(os.current=!0,C(!0))):(c++,t=0,c>=15&&os.current&&(os.current=!1,C(!1)))),ls.current=requestAnimationFrame(l)};l()}catch(d){console.error("Audio visualization error:",d)}},[]),ks=(0,c.useCallback)(function(){ls.current&&cancelAnimationFrame(ls.current),P(0),B(0)},[]),hs=(0,c.useCallback)(function(){ns.current&&(ns.current.innerHTML="")},[]),xs=(0,c.useCallback)((0,t.A)((0,i.A)().m(function s(){var e,t,c,r,l,d,o,u,h,x,v;return(0,i.A)().w(function(s){for(;;)switch(s.p=s.n){case 0:if("idle"===m){s.n=1;break}return s.a(2);case 1:if("undefined"!=typeof window){s.n=2;break}return s.a(2);case 2:return V(null),k("connecting"),N([]),g(""),s.p=3,s.n=4,a.e(2223).then(a.bind(a,2223));case 4:return e=s.v,t=e.Room,c=e.RoomEvent,r=e.Track,l=e.createLocalAudioTrack,s.n=5,fetch("https://physical-ai-backend-production-1c69.up.railway.app/voice/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_name:"young-explorer"})});case 5:if((d=s.v).ok){s.n=6;break}throw new Error("Oops! Could not connect. Try again! \ud83d\udd04");case 6:return s.n=7,d.json();case 7:return o=s.v,(u=new t({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!1,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16},disconnectOnPageLeave:!0})).on(c.TrackSubscribed,function(s,e,a){var i;if(s.kind===r.Kind.Audio){var n=s.attach();n.autoplay=!0,n.controls=!1,null==(i=ns.current)||i.appendChild(n);var t=new MediaStream([s.mediaStreamTrack]);ms(t,!1)}}),u.on(c.TrackUnsubscribed,function(s){s.detach().forEach(function(s){return s.remove()})}),u.on(c.TranscriptionReceived,function(s,e){for(var a,i=function(){var s=a.value,i=(null==e?void 0:e.identity)!==u.localParticipant.identity?"assistant":"user";s.final?(N(function(e){return[].concat(e,[{id:s.id||Date.now()+"-"+Math.random(),role:i,text:s.text,timestamp:new Date,isFinal:!0}])}),g(""),"user"===i&&us()):g(s.text)},t=(0,n.A)(s);!(a=t()).done;)i()}),u.on(c.Disconnected,function(){hs(),ks(),as.current=null,is.current=null,k("idle")}),u.on(c.ParticipantConnected,function(){N(function(s){return[].concat(s,[{id:"welcome-"+Date.now(),role:"assistant",text:"Hi there, explorer! \ud83c\udf31 Ask me anything about plants!",timestamp:new Date,isFinal:!0}])})}),s.n=8,u.connect(o.url,o.token);case 8:return as.current=u,s.n=9,l({echoCancellation:!0,noiseSuppression:!1,autoGainControl:!0,channelCount:1,sampleRate:48e3});case 9:return h=s.v,is.current=h,s.n=10,u.localParticipant.publishTrack(h,{audioPreset:e.AudioPresets.speech,dtx:!0,red:!0});case 10:x=new MediaStream([h.mediaStreamTrack]),ms(x,!0),k("connected"),s.n=12;break;case 11:s.p=11,v=s.v,console.error("Voice call error:",v),V("Oops! Something went wrong. Tap to try again! \ud83d\udd04"),k("idle");case 12:return s.a(2)}},s,null,[[3,11]])})),[m,hs,ks,ms,us]),vs=(0,c.useCallback)((0,t.A)((0,i.A)().m(function s(){var e,a;return(0,i.A)().w(function(s){for(;;)switch(s.n){case 0:try{if(e=as.current,a=is.current,e&&a){try{e.localParticipant.unpublishTrack(a)}catch(i){}try{a.stop()}catch(n){}}if(e)try{e.disconnect()}catch(t){}}finally{hs(),ks(),as.current=null,is.current=null,k("idle"),v(!1)}case 1:return s.a(2)}},s)})),[hs,ks]),ps=(0,c.useCallback)(function(){var s=is.current;s&&(x?s.unmute():s.mute(),v(!x))},[x]);(0,c.useEffect)(function(){return function(){vs(),ts.current&&ts.current.close()}},[vs]);var js=(0,c.useCallback)(function(){vs(),o()},[vs,o]);if(!e)return null;var Ns="connected"===m||"speaking"===m||"listening"===m||"processing"===m;return(0,r.jsxs)("div",{className:"kids-voice-overlay",children:[(0,r.jsxs)("div",{className:"kids-bg",children:[(0,r.jsx)("div",{className:"kids-bg-gradient"}),(0,r.jsxs)("div",{className:"kids-floating-shapes",children:[(0,r.jsx)("div",{className:"kids-float kids-float-1",children:"\ud83c\udf43"}),(0,r.jsx)("div",{className:"kids-float kids-float-2",children:"\u2728"}),(0,r.jsx)("div",{className:"kids-float kids-float-3",children:"\ud83c\udf3f"}),(0,r.jsx)("div",{className:"kids-float kids-float-4",children:"\u2b50"}),(0,r.jsx)("div",{className:"kids-float kids-float-5",children:"\ud83c\udf31"}),(0,r.jsx)("div",{className:"kids-float kids-float-6",children:"\ud83d\udcab"})]}),(0,r.jsx)("div",{className:"kids-bubbles",children:[].concat(Array(8)).map(function(s,e){return(0,r.jsx)("div",{className:"kids-bubble kids-bubble-"+(e+1)},e)})})]}),(0,r.jsxs)("div",{className:"kids-voice-container",children:[(0,r.jsxs)("div",{className:"kids-header",children:[(0,r.jsx)("button",{className:"kids-close-btn",onClick:js,"aria-label":"Go back",children:(0,r.jsx)("span",{className:"kids-close-icon",children:"\u2715"})}),(0,r.jsxs)("div",{className:"kids-title",children:[(0,r.jsx)("span",{className:"kids-title-icon",children:"\ud83c\udf31"}),(0,r.jsx)("span",{className:"kids-title-text",children:"Plant Buddy"})]}),(0,r.jsxs)("div",{className:"kids-stars-counter",children:[(0,r.jsx)("span",{className:"kids-star-icon",children:"\u2b50"}),(0,r.jsx)("span",{className:"kids-star-count",children:O})]})]}),(0,r.jsxs)("div",{className:"kids-mascot-area",children:[z&&(0,r.jsx)("div",{className:"kids-star-burst",children:[].concat(Array(12)).map(function(s,e){return(0,r.jsx)("div",{className:"kids-star-particle",style:{"--i":e},children:"\u2b50"},e)})}),G&&(0,r.jsx)("div",{className:"kids-encouragement",children:G}),(0,r.jsxs)("div",{className:"kids-mascot kids-mascot-"+X,children:[w&&(0,r.jsx)("div",{className:"kids-sound-waves",children:[].concat(Array(3)).map(function(s,e){return(0,r.jsx)("div",{className:"kids-sound-wave",style:{animationDelay:.15*e+"s",transform:"scale("+(1+L*(e+1)*.3)+")"}},e)})}),A&&Ns&&(0,r.jsx)("div",{className:"kids-listening-sparkles",children:[].concat(Array(6)).map(function(s,e){return(0,r.jsx)("div",{className:"kids-sparkle",style:{"--delay":.2*e+"s"},children:"\u2728"},e)})}),(0,r.jsxs)("div",{className:"kids-mascot-pot",children:[(0,r.jsx)("div",{className:"kids-mascot-pot-rim"}),(0,r.jsx)("div",{className:"kids-mascot-pot-body"}),(0,r.jsx)("div",{className:"kids-mascot-pot-soil"})]}),(0,r.jsxs)("div",{className:"kids-mascot-body",children:[(0,r.jsx)("div",{className:"kids-mascot-stem"}),(0,r.jsxs)("div",{className:"kids-mascot-leaves",children:[(0,r.jsx)("div",{className:"kids-mascot-leaf kids-mascot-leaf-left"}),(0,r.jsx)("div",{className:"kids-mascot-leaf kids-mascot-leaf-right"})]}),(0,r.jsxs)("div",{className:"kids-mascot-face",children:[(0,r.jsxs)("div",{className:"kids-mascot-eyes",children:[(0,r.jsxs)("div",{className:"kids-mascot-eye kids-mascot-eye-left "+("sleeping"===X?"closed":""),children:[(0,r.jsx)("div",{className:"kids-mascot-pupil"}),(0,r.jsx)("div",{className:"kids-mascot-eye-shine"})]}),(0,r.jsxs)("div",{className:"kids-mascot-eye kids-mascot-eye-right "+("sleeping"===X?"closed":""),children:[(0,r.jsx)("div",{className:"kids-mascot-pupil"}),(0,r.jsx)("div",{className:"kids-mascot-eye-shine"})]})]}),(0,r.jsx)("div",{className:"kids-mascot-mouth kids-mascot-mouth-"+X,children:w&&(0,r.jsx)("div",{className:"kids-mascot-mouth-speaking"})}),(0,r.jsxs)("div",{className:"kids-mascot-cheeks",children:[(0,r.jsx)("div",{className:"kids-mascot-cheek kids-mascot-cheek-left"}),(0,r.jsx)("div",{className:"kids-mascot-cheek kids-mascot-cheek-right"})]})]})]}),(0,r.jsxs)("div",{className:"kids-mascot-flower",children:[(0,r.jsx)("div",{className:"kids-mascot-flower-center"}),[].concat(Array(6)).map(function(s,e){return(0,r.jsx)("div",{className:"kids-mascot-petal",style:{"--rotation":60*e+"deg"}},e)})]})]}),(0,r.jsxs)("div",{className:"kids-status-text",children:["idle"===m&&(0,r.jsx)("span",{className:"kids-status-idle",children:"Tap the button to wake me up! \ud83d\udc47"}),"connecting"===m&&(0,r.jsxs)("span",{className:"kids-status-connecting",children:[(0,r.jsxs)("span",{className:"kids-bounce-dots",children:[(0,r.jsx)("span",{children:"."}),(0,r.jsx)("span",{children:"."}),(0,r.jsx)("span",{children:"."})]}),"Waking up..."]}),Ns&&"thinking"===ss&&(0,r.jsx)("span",{className:"kids-status-ready",children:"I'm listening! Ask me anything! \ud83c\udfa4"}),Ns&&"listening"===ss&&(0,r.jsxs)("span",{className:"kids-status-listening",children:[(0,r.jsxs)("span",{className:"kids-listening-dots",children:[(0,r.jsx)("span",{}),(0,r.jsx)("span",{}),(0,r.jsx)("span",{})]}),"Hearing you..."]}),Ns&&"speaking"===ss&&(0,r.jsx)("span",{className:"kids-status-speaking",children:"Plant Buddy is talking... \ud83d\udde3\ufe0f"})]})]}),(0,r.jsxs)("div",{className:"kids-transcript-theater",children:[(0,r.jsx)("div",{className:"kids-theater-corner kids-theater-corner-tl",children:"\u2728"}),(0,r.jsx)("div",{className:"kids-theater-corner kids-theater-corner-tr",children:"\ud83c\udf1f"}),(0,r.jsx)("div",{className:"kids-theater-corner kids-theater-corner-bl",children:"\ud83d\udcab"}),(0,r.jsx)("div",{className:"kids-theater-corner kids-theater-corner-br",children:"\u2b50"}),(0,r.jsxs)("div",{className:"kids-theater-header",children:[(0,r.jsxs)("div",{className:"kids-theater-title",children:[(0,r.jsx)("span",{className:"kids-theater-icon",children:"\ud83d\udcdc"}),(0,r.jsx)("span",{children:"Our Chat Story"})]}),(0,r.jsxs)("div",{className:"kids-theater-live-badge",children:[(0,r.jsx)("span",{className:"kids-live-dot"}),(0,r.jsx)("span",{children:"LIVE"})]})]}),(0,r.jsxs)("div",{className:"kids-theater-scroll",children:[E&&(0,r.jsxs)("div",{className:"kids-comic-error",children:[(0,r.jsx)("div",{className:"kids-error-character",children:"\ud83d\ude05"}),(0,r.jsxs)("div",{className:"kids-error-bubble",children:[(0,r.jsx)("span",{children:E}),(0,r.jsx)("div",{className:"kids-bubble-tail kids-tail-left"})]})]}),0===j.length&&!b&&!E&&(0,r.jsxs)("div",{className:"kids-empty-theater",children:[(0,r.jsx)("div",{className:"kids-empty-icon",children:"\ud83d\udcac"}),(0,r.jsx)("div",{className:"kids-empty-text",children:Ns?"Start talking! Your words will appear here like magic! \u2728":"Tap the green button to start our adventure! \ud83d\ude80"})]}),j.slice(-4).map(function(s,e){return(0,r.jsxs)("div",{className:"kids-comic-panel kids-comic-"+s.role,style:{"--delay":.1*e+"s"},children:[(0,r.jsxs)("div",{className:"kids-comic-character",children:[(0,r.jsx)("div",{className:"kids-character-avatar kids-avatar-"+s.role,children:"assistant"===s.role?(0,r.jsx)("div",{className:"kids-plant-mini",children:(0,r.jsx)("div",{className:"kids-plant-mini-pot",children:"\ud83e\udeb4"})}):(0,r.jsx)("div",{className:"kids-kid-avatar",children:"\ud83d\udc67"})}),(0,r.jsx)("div",{className:"kids-character-name",children:"assistant"===s.role?"Plant Buddy":"You"})]}),(0,r.jsxs)("div",{className:"kids-comic-bubble-container",children:[(0,r.jsxs)("div",{className:"kids-comic-bubble kids-bubble-"+s.role,children:[(0,r.jsx)("div",{className:"kids-bubble-content",children:s.text}),(0,r.jsx)("div",{className:"kids-bubble-sparkles",children:"assistant"===s.role&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"kids-mini-sparkle",children:"\u2728"}),(0,r.jsx)("span",{className:"kids-mini-sparkle",children:"\ud83c\udf3f"})]})}),(0,r.jsx)("div",{className:"kids-bubble-tail kids-tail-"+s.role})]}),(0,r.jsx)("div",{className:"kids-bubble-time",children:s.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},s.id)}),b&&(0,r.jsxs)("div",{className:"kids-comic-panel kids-comic-user kids-comic-live",children:[(0,r.jsxs)("div",{className:"kids-comic-character",children:[(0,r.jsxs)("div",{className:"kids-character-avatar kids-avatar-user kids-avatar-talking",children:[(0,r.jsx)("div",{className:"kids-kid-avatar",children:"\ud83d\udc67"}),(0,r.jsxs)("div",{className:"kids-talking-waves",children:[(0,r.jsx)("span",{}),(0,r.jsx)("span",{}),(0,r.jsx)("span",{})]})]}),(0,r.jsx)("div",{className:"kids-character-name",children:"You"})]}),(0,r.jsx)("div",{className:"kids-comic-bubble-container",children:(0,r.jsxs)("div",{className:"kids-comic-bubble kids-bubble-user kids-bubble-live",children:[(0,r.jsxs)("div",{className:"kids-bubble-content",children:[b,(0,r.jsx)("span",{className:"kids-live-cursor",children:"|"})]}),(0,r.jsxs)("div",{className:"kids-live-indicator",children:[(0,r.jsx)("span",{className:"kids-wave-bar"}),(0,r.jsx)("span",{className:"kids-wave-bar"}),(0,r.jsx)("span",{className:"kids-wave-bar"}),(0,r.jsx)("span",{className:"kids-wave-bar"}),(0,r.jsx)("span",{className:"kids-wave-bar"})]}),(0,r.jsx)("div",{className:"kids-bubble-tail kids-tail-user"})]})})]}),Ns&&!w&&!A&&j.length>0&&(0,r.jsxs)("div",{className:"kids-thinking-panel",children:[(0,r.jsx)("div",{className:"kids-thinking-avatar",children:"\ud83c\udf31"}),(0,r.jsxs)("div",{className:"kids-thinking-bubble",children:[(0,r.jsxs)("div",{className:"kids-thinking-dots",children:[(0,r.jsx)("span",{}),(0,r.jsx)("span",{}),(0,r.jsx)("span",{})]}),(0,r.jsx)("span",{className:"kids-thinking-text",children:K})]})]})]})]}),(0,r.jsxs)("div",{className:"kids-controls",children:[Ns&&(0,r.jsx)("div",{className:"kids-audio-feedback",children:[].concat(Array(5)).map(function(s,e){return(0,r.jsx)("div",{className:"kids-audio-bar "+(R>.18*(e+1)?"active":""),style:{height:16+6*e+"px"}},e)})}),(0,r.jsxs)("button",{className:"kids-mic-button "+(Ns?"active":"")+" "+("connecting"===m?"connecting":"")+" "+(A?"speaking":""),onClick:function(){return Ns?void vs():void xs()},disabled:"connecting"===m,"aria-label":Ns?"Stop talking":"Start talking",children:[Ns&&!x&&(0,r.jsxs)("div",{className:"kids-mic-rings",children:[(0,r.jsx)("div",{className:"kids-mic-ring",style:{transform:"scale("+(1+.5*R)+")"}}),(0,r.jsx)("div",{className:"kids-mic-ring",style:{transform:"scale("+(1.2+.3*R)+")",animationDelay:"0.2s"}}),(0,r.jsx)("div",{className:"kids-mic-ring",style:{transform:"scale("+(1.4+.2*R)+")",animationDelay:"0.4s"}})]}),(0,r.jsx)("div",{className:"kids-mic-inner",children:"connecting"===m?(0,r.jsx)("div",{className:"kids-mic-loading",children:(0,r.jsx)("div",{className:"kids-spinner",children:"\ud83c\udf31"})}):Ns?(0,r.jsx)("div",{className:"kids-mic-icon kids-mic-active",children:(0,r.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{x:"9",y:"2",width:"6",height:"12",rx:"3",fill:"currentColor"}),(0,r.jsx)("path",{d:"M5 10V12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12V10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M12 19V22",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M8 22H16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})}):(0,r.jsx)("div",{className:"kids-mic-icon",children:(0,r.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{x:"9",y:"2",width:"6",height:"12",rx:"3",fill:"currentColor"}),(0,r.jsx)("path",{d:"M5 10V12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12V10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M12 19V22",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M8 22H16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})})}),(0,r.jsx)("span",{className:"kids-mic-label",children:Ns?"Tap to Stop":"Tap to Talk!"})]}),Ns&&(0,r.jsx)("button",{className:"kids-mute-button "+(x?"muted":""),onClick:ps,"aria-label":x?"Unmute":"Mute",children:x?"\ud83d\udd07":"\ud83d\udd0a"})]}),(0,r.jsxs)("div",{className:"kids-fun-tip",children:[(0,r.jsx)("span",{className:"kids-tip-icon",children:"\ud83d\udca1"}),(0,r.jsx)("span",{className:"kids-tip-text",children:Ns?"Ask about plants, flowers, or trees!":"Ready for a plant adventure?"})]})]}),(0,r.jsx)("div",{ref:ns,style:{display:"none"}})]})}}}]);